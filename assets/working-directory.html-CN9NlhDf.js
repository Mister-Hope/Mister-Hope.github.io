import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,d as n,e as o,b as t,o as l}from"./app-K4WwjAaR.js";const p="/assets/git3-63iS0-9E.jpg",r="/assets/git4-d8P-6ksl.jpg",c={};function i(d,s){return l(),e("div",null,[s[0]||(s[0]=n("p",null,"Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。",-1)),o(" more "),s[1]||(s[1]=t('<h2 id="工作区-working-directory" tabindex="-1"><a class="header-anchor" href="#工作区-working-directory"><span>工作区(Working Directory)</span></a></h2><p>就是您在电脑里能看到的目录，比如 learngit 文件夹就是一个工作区:</p><h2 id="版本库-repository" tabindex="-1"><a class="header-anchor" href="#版本库-repository"><span>版本库(Repository)</span></a></h2><p>工作区有一个隐藏目录.git，这个不算工作区，而是 Git 的版本库。</p><p>Git 的版本库里存了很多东西，其中最重要的就是称为 stage(或者叫 index)的暂存区，还有 Git 为我们自动创建的第一个分支 <code>master</code>，以及指向 master 的一个指针叫 <code>HEAD</code>。</p><figure><img src="'+p+`" alt="版本库图例" tabindex="0" loading="lazy"><figcaption>版本库图例</figcaption></figure><p>前面讲了我们把文件往 Git 版本库里添加的时候，提交更改，实际上就是把暂存区的所有内容提交到当前分支。我们创建 Git 版本库时，Git 自动为我们创建了唯一一个 <code>master</code> 分支，所以，现在，<code>git commit</code> 就是往 master 分支上提交更改。</p><p>您可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。</p><p>先对 readme.txt 做个修改，比如加上一行内容:</p><div class="language-md" data-highlighter="shiki" data-ext="md" data-title="md" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9FF;">Git is a distributed version control system.</span></span>
<span class="line"><span style="color:#D8DEE9FF;">Git is free software distributed under the GPL.</span></span>
<span class="line"><span style="color:#D8DEE9FF;">Git has a mutable index called stage.</span></span></code></pre></div><p>然后，在工作区新增一个 LICENSE 文本文件(内容随便写)。</p><p>先用 <code>git status</code> 查看一下状态:</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">$</span><span style="color:#A3BE8C;"> git</span><span style="color:#A3BE8C;"> status</span></span>
<span class="line"><span style="color:#88C0D0;">On</span><span style="color:#A3BE8C;"> branch</span><span style="color:#A3BE8C;"> master</span></span>
<span class="line"><span style="color:#88C0D0;">Changes</span><span style="color:#A3BE8C;"> not</span><span style="color:#A3BE8C;"> staged</span><span style="color:#A3BE8C;"> for</span><span style="color:#A3BE8C;"> commit:</span></span>
<span class="line"><span style="color:#ECEFF4;">  (</span><span style="color:#88C0D0;">use</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">git add &lt;file&gt;...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;"> to</span><span style="color:#A3BE8C;"> update</span><span style="color:#A3BE8C;"> what</span><span style="color:#A3BE8C;"> will</span><span style="color:#A3BE8C;"> be</span><span style="color:#A3BE8C;"> committed</span><span style="color:#ECEFF4;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  (</span><span style="color:#88C0D0;">use</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">git checkout -- &lt;file&gt;...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;"> to</span><span style="color:#A3BE8C;"> discard</span><span style="color:#A3BE8C;"> changes</span><span style="color:#A3BE8C;"> in</span><span style="color:#A3BE8C;"> working</span><span style="color:#A3BE8C;"> directory</span><span style="color:#ECEFF4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">    modified:</span><span style="color:#A3BE8C;">   readme.txt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">Untracked</span><span style="color:#A3BE8C;"> files:</span></span>
<span class="line"><span style="color:#ECEFF4;">  (</span><span style="color:#88C0D0;">use</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">git add &lt;file&gt;...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;"> to</span><span style="color:#A3BE8C;"> include</span><span style="color:#A3BE8C;"> in</span><span style="color:#A3BE8C;"> what</span><span style="color:#A3BE8C;"> will</span><span style="color:#A3BE8C;"> be</span><span style="color:#A3BE8C;"> committed</span><span style="color:#ECEFF4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">    LICENSE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">no</span><span style="color:#A3BE8C;"> changes</span><span style="color:#A3BE8C;"> added</span><span style="color:#A3BE8C;"> to</span><span style="color:#A3BE8C;"> commit</span><span style="color:#D8DEE9FF;"> (use </span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">git add</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;"> and/or</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">git commit -a</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Git 非常清楚地告诉我们，readme.txt 被修改了，而 LICENSE 还从来没有被添加过，所以它的状态是 <code>Untracked</code>。</p><p>现在，使用两次命令 <code>git add</code>，把 readme.txt 和 LICENSE 都添加后，用 <code>git status</code> 再查看一下:</p><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">$</span><span style="color:#A3BE8C;"> git</span><span style="color:#A3BE8C;"> status</span></span>
<span class="line"><span style="color:#88C0D0;">On</span><span style="color:#A3BE8C;"> branch</span><span style="color:#A3BE8C;"> master</span></span>
<span class="line"><span style="color:#88C0D0;">Changes</span><span style="color:#A3BE8C;"> to</span><span style="color:#A3BE8C;"> be</span><span style="color:#A3BE8C;"> committed:</span></span>
<span class="line"><span style="color:#ECEFF4;">  (</span><span style="color:#88C0D0;">use</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">git reset HEAD &lt;file&gt;...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;"> to</span><span style="color:#A3BE8C;"> unstage</span><span style="color:#ECEFF4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">    new</span><span style="color:#A3BE8C;"> file:</span><span style="color:#A3BE8C;">   LICENSE</span></span>
<span class="line"><span style="color:#88C0D0;">    modified:</span><span style="color:#A3BE8C;">   readme.txt</span></span></code></pre></div><p>现在，暂存区的状态就变成这样了:</p><figure><img src="`+r+`" alt="状态示意图" tabindex="0" loading="lazy"><figcaption>状态示意图</figcaption></figure><p>所以，<code>git add</code> 命令实际上就是把要提交的所有修改放到暂存区(Stage)，然后，执行 <code>git commit</code> 就可以一次性把暂存区的所有修改提交到分支。</p><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">$</span><span style="color:#A3BE8C;"> git</span><span style="color:#A3BE8C;"> commit</span><span style="color:#A3BE8C;"> -m</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">understand how stage works</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#ECEFF4;">[</span><span style="color:#D8DEE9FF;">master e43a48b</span><span style="color:#ECEFF4;">]</span><span style="color:#D8DEE9FF;"> understand how stage works</span></span>
<span class="line"><span style="color:#88C0D0;"> 2</span><span style="color:#A3BE8C;"> files</span><span style="color:#A3BE8C;"> changed,</span><span style="color:#B48EAD;"> 2</span><span style="color:#A3BE8C;"> insertions</span><span style="color:#ECEFF4;">(</span><span style="color:#88C0D0;">+</span><span style="color:#ECEFF4;">)</span></span>
<span class="line"><span style="color:#88C0D0;"> create</span><span style="color:#A3BE8C;"> mode</span><span style="color:#B48EAD;"> 100644</span><span style="color:#A3BE8C;"> LICENSE</span></span></code></pre></div><p>一旦提交后，如果您又没有对工作区做任何修改，那么工作区就是“干净”的:</p><div class="language-sh" data-highlighter="shiki" data-ext="sh" data-title="sh" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">$</span><span style="color:#A3BE8C;"> git</span><span style="color:#A3BE8C;"> status</span></span>
<span class="line"><span style="color:#88C0D0;">On</span><span style="color:#A3BE8C;"> branch</span><span style="color:#A3BE8C;"> master</span></span>
<span class="line"><span style="color:#88C0D0;">nothing</span><span style="color:#A3BE8C;"> to</span><span style="color:#A3BE8C;"> commit,</span><span style="color:#A3BE8C;"> working</span><span style="color:#A3BE8C;"> tree</span><span style="color:#A3BE8C;"> clean</span></span></code></pre></div>`,22))])}const m=a(c,[["render",i],["__file","working-directory.html.vue"]]),C=JSON.parse('{"path":"/software/git/working-directory.html","title":"工作区和暂存区","lang":"zh-CN","frontmatter":{"date":"2020-05-05T00:00:00.000Z","title":"工作区和暂存区","icon":"workingDirectory","order":7,"author":"廖雪峰","category":"Git","tag":["Git","软件"],"copyright":"Copyright by 廖雪峰 Edited by Mr.Hope","description":"Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。","head":[["meta",{"property":"og:url","content":"https://mister-hope.com/software/git/working-directory.html"}],["meta",{"property":"og:site_name","content":"Mr.Hope"}],["meta",{"property":"og:title","content":"工作区和暂存区"}],["meta",{"property":"og:description","content":"Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-25T17:47:26.000Z"}],["meta",{"property":"article:author","content":"廖雪峰"}],["meta",{"property":"article:tag","content":"Git"}],["meta",{"property":"article:tag","content":"软件"}],["meta",{"property":"article:published_time","content":"2020-05-05T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-25T17:47:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"工作区和暂存区\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2020-05-05T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-25T17:47:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"廖雪峰\\"}]}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://mister-hope.com/atom.xml","title":"Mr.Hope Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://mister-hope.com/feed.json","title":"Mr.Hope JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://mister-hope.com/rss.xml","title":"Mr.Hope RSS Feed"}]]},"headers":[{"level":2,"title":"工作区(Working Directory)","slug":"工作区-working-directory","link":"#工作区-working-directory","children":[]},{"level":2,"title":"版本库(Repository)","slug":"版本库-repository","link":"#版本库-repository","children":[]}],"git":{"createdTime":1591204114000,"updatedTime":1706204846000,"contributors":[{"name":"Mr.Hope","email":"zhangbowang1998@gmail.com","commits":4},{"name":"Mr.Hope","email":"mister-hope@outlook.com","commits":2}]},"readingTime":{"minutes":2.22,"words":666},"filePathRelative":"software/git/working-directory.md","localizedDate":"2020年5月5日","excerpt":"<p>Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。</p>\\n","autoDesc":true}');export{m as comp,C as data};
