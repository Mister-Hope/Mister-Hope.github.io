import{_ as x}from"./chunk-T722YX6C-BXEgdhya.js";import{m as g,J as k,Q as w,e as H,Z as W,b as B,b5 as X,I as u,ba as Y,i as R,j as C}from"./mermaid.esm.min-CYtK-qUM.js";var U=g((r,t,e,p)=>{t.forEach(l=>{V[l](r,e,p)})},"insertMarkers"),Z=g((r,t,e)=>{k.trace("Making markers for ",e),r.append("defs").append("marker").attr("id",e+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),r.append("defs").append("marker").attr("id",e+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),O=g((r,t,e)=>{r.append("defs").append("marker").attr("id",e+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id",e+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),N=g((r,t,e)=>{r.append("defs").append("marker").attr("id",e+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id",e+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),I=g((r,t,e)=>{r.append("defs").append("marker").attr("id",e+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id",e+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),A=g((r,t,e)=>{r.append("defs").append("marker").attr("id",e+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),r.append("defs").append("marker").attr("id",e+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),J=g((r,t,e)=>{r.append("marker").attr("id",e+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),r.append("marker").attr("id",e+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),Q=g((r,t,e)=>{r.append("marker").attr("id",e+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),r.append("marker").attr("id",e+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),q=g((r,t,e)=>{r.append("marker").attr("id",e+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),r.append("marker").attr("id",e+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),z=g((r,t,e)=>{r.append("defs").append("marker").attr("id",e+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),V={extension:Z,composition:O,aggregation:N,dependency:I,lollipop:A,point:J,circle:Q,cross:q,barb:z},et=U,j=g((r,t,e,p,l)=>{t.arrowTypeStart&&_(r,"start",t.arrowTypeStart,e,p,l),t.arrowTypeEnd&&_(r,"end",t.arrowTypeEnd,e,p,l)},"addEdgeMarkers"),G={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},_=g((r,t,e,p,l,o)=>{let s=G[e];if(!s){k.warn(`Unknown arrow type: ${e}`);return}let a=t==="start"?"Start":"End";r.attr(`marker-${t}`,`url(${p}#${l}_${o}-${s}${a})`)},"addEdgeMarker"),M={},m={},rt=g(()=>{M={},m={}},"clear"),at=g((r,t)=>{let e=w(),p=H(e.flowchart.htmlLabels),l=t.labelType==="markdown"?W(r,t.label,{style:t.labelStyle,useHtmlLabels:p,addSvgBackground:!0},e):x(t.label,t.labelStyle),o=r.insert("g").attr("class","edgeLabel"),s=o.insert("g").attr("class","label");s.node().appendChild(l);let a=l.getBBox();if(p){let d=l.children[0],n=B(l);a=d.getBoundingClientRect(),n.attr("width",a.width),n.attr("height",a.height)}s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),M[t.id]=o,t.width=a.width,t.height=a.height;let i;if(t.startLabelLeft){let d=x(t.startLabelLeft,t.labelStyle),n=r.insert("g").attr("class","edgeTerminals"),c=n.insert("g").attr("class","inner");i=c.node().appendChild(d);let h=d.getBBox();c.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),m[t.id]||(m[t.id]={}),m[t.id].startLeft=n,L(i,t.startLabelLeft)}if(t.startLabelRight){let d=x(t.startLabelRight,t.labelStyle),n=r.insert("g").attr("class","edgeTerminals"),c=n.insert("g").attr("class","inner");i=n.node().appendChild(d),c.node().appendChild(d);let h=d.getBBox();c.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),m[t.id]||(m[t.id]={}),m[t.id].startRight=n,L(i,t.startLabelRight)}if(t.endLabelLeft){let d=x(t.endLabelLeft,t.labelStyle),n=r.insert("g").attr("class","edgeTerminals"),c=n.insert("g").attr("class","inner");i=c.node().appendChild(d);let h=d.getBBox();c.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),n.node().appendChild(d),m[t.id]||(m[t.id]={}),m[t.id].endLeft=n,L(i,t.endLabelLeft)}if(t.endLabelRight){let d=x(t.endLabelRight,t.labelStyle),n=r.insert("g").attr("class","edgeTerminals"),c=n.insert("g").attr("class","inner");i=c.node().appendChild(d);let h=d.getBBox();c.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),n.node().appendChild(d),m[t.id]||(m[t.id]={}),m[t.id].endRight=n,L(i,t.endLabelRight)}return l},"insertEdgeLabel");function L(r,t){w().flowchart.htmlLabels&&r&&(r.style.width=t.length*9+"px",r.style.height="12px")}g(L,"setTerminalWidth");var it=g((r,t)=>{k.debug("Moving label abc88 ",r.id,r.label,M[r.id],t);let e=t.updatedPath?t.updatedPath:t.originalPath,p=w(),{subGraphTitleTotalMargin:l}=X(p);if(r.label){let o=M[r.id],s=r.x,a=r.y;if(e){let i=u.calcLabelPosition(e);k.debug("Moving label "+r.label+" from (",s,",",a,") to (",i.x,",",i.y,") abc88"),t.updatedPath&&(s=i.x,a=i.y)}o.attr("transform",`translate(${s}, ${a+l/2})`)}if(r.startLabelLeft){let o=m[r.id].startLeft,s=r.x,a=r.y;if(e){let i=u.calcTerminalLabelPosition(r.arrowTypeStart?10:0,"start_left",e);s=i.x,a=i.y}o.attr("transform",`translate(${s}, ${a})`)}if(r.startLabelRight){let o=m[r.id].startRight,s=r.x,a=r.y;if(e){let i=u.calcTerminalLabelPosition(r.arrowTypeStart?10:0,"start_right",e);s=i.x,a=i.y}o.attr("transform",`translate(${s}, ${a})`)}if(r.endLabelLeft){let o=m[r.id].endLeft,s=r.x,a=r.y;if(e){let i=u.calcTerminalLabelPosition(r.arrowTypeEnd?10:0,"end_left",e);s=i.x,a=i.y}o.attr("transform",`translate(${s}, ${a})`)}if(r.endLabelRight){let o=m[r.id].endRight,s=r.x,a=r.y;if(e){let i=u.calcTerminalLabelPosition(r.arrowTypeEnd?10:0,"end_right",e);s=i.x,a=i.y}o.attr("transform",`translate(${s}, ${a})`)}},"positionEdgeLabel"),D=g((r,t)=>{let e=r.x,p=r.y,l=Math.abs(t.x-e),o=Math.abs(t.y-p),s=r.width/2,a=r.height/2;return l>=s||o>=a},"outsideNode"),F=g((r,t,e)=>{k.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(e)}
  node        : x:${r.x} y:${r.y} w:${r.width} h:${r.height}`);let p=r.x,l=r.y,o=Math.abs(p-e.x),s=r.width/2,a=e.x<t.x?s-o:s+o,i=r.height/2,d=Math.abs(t.y-e.y),n=Math.abs(t.x-e.x);if(Math.abs(l-t.y)*s>Math.abs(p-t.x)*i){let c=e.y<t.y?t.y-i-l:l-i-t.y;a=n*c/d;let h={x:e.x<t.x?e.x+a:e.x-n+a,y:e.y<t.y?e.y+d-c:e.y-d+c};return a===0&&(h.x=t.x,h.y=t.y),n===0&&(h.x=t.x),d===0&&(h.y=t.y),k.debug(`abc89 topp/bott calc, Q ${d}, q ${c}, R ${n}, r ${a}`,h),h}else{e.x<t.x?a=t.x-s-p:a=p-s-t.x;let c=d*a/n,h=e.x<t.x?e.x+n-a:e.x-n+a,y=e.y<t.y?e.y+c:e.y-c;return k.debug(`sides calc abc89, Q ${d}, q ${c}, R ${n}, r ${a}`,{_x:h,_y:y}),a===0&&(h=t.x,y=t.y),n===0&&(h=t.x),d===0&&(y=t.y),{x:h,y}}},"intersection"),S=g((r,t)=>{k.debug("abc88 cutPathAtIntersect",r,t);let e=[],p=r[0],l=!1;return r.forEach(o=>{if(!D(t,o)&&!l){let s=F(t,p,o),a=!1;e.forEach(i=>{a=a||i.x===s.x&&i.y===s.y}),e.some(i=>i.x===s.x&&i.y===s.y)||e.push(s),l=!0}else p=o,l||e.push(o)}),e},"cutPathAtIntersect"),st=g(function(r,t,e,p,l,o,s){let a=e.points;k.debug("abc88 InsertEdge: edge=",e,"e=",t);let i=!1,d=o.node(t.v);var n=o.node(t.w);n!=null&&n.intersect&&(d!=null&&d.intersect)&&(a=a.slice(1,e.points.length-1),a.unshift(d.intersect(a[0])),a.push(n.intersect(a[a.length-1]))),e.toCluster&&(k.debug("to cluster abc88",p[e.toCluster]),a=S(e.points,p[e.toCluster].node),i=!0),e.fromCluster&&(k.debug("from cluster abc88",p[e.fromCluster]),a=S(a.reverse(),p[e.fromCluster].node).reverse(),i=!0);let c=a.filter(T=>!Number.isNaN(T.y)),h=C;e.curve&&(l==="graph"||l==="flowchart")&&(h=e.curve);let{x:y,y:E}=Y(e),v=R().x(y).y(E).curve(h),f;switch(e.thickness){case"normal":f="edge-thickness-normal";break;case"thick":f="edge-thickness-thick";break;case"invisible":f="edge-thickness-thick";break;default:f=""}switch(e.pattern){case"solid":f+=" edge-pattern-solid";break;case"dotted":f+=" edge-pattern-dotted";break;case"dashed":f+=" edge-pattern-dashed";break}let P=r.append("path").attr("d",v(c)).attr("id",e.id).attr("class"," "+f+(e.classes?" "+e.classes:"")).attr("style",e.style),b="";(w().flowchart.arrowMarkerAbsolute||w().state.arrowMarkerAbsolute)&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),j(P,e,b,s,l);let $={};return i&&($.updatedPath=a),$.originalPath=e.points,$},"insertEdge");export{st as L,rt as b,et as t,at as x,it as y};
